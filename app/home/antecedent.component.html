
<div class="container full-width">
    <div class="row">

        <div id="antecedents" *ngIf="dossierMedical">
            <h2>Antecedents du patient</h2>



            <button class="btn btn-primary" (click)="lgModal1.show()"><span class="glyphicon glyphicon-plus"></span></button>


            <div class="table-responsive" >
                <div class="table table-bordered" >
                    <div class="pre-scrollable  " >

                        <table id="myTable4" class="table table-hover">
                            <tr class="header">

                                <th  onclick="sortTable(0,4)" style="width:5%;">Id</th>
                                <th  onclick="sortTable(1,4)" style="width:50%;">Date</th>
                                <th  onclick="sortTable(2,4)" style="width:50%;">Description</th>
                                <th  onclick="sortTable(3,4)" style="width:50%;">Commentaire</th>
                                <th  onclick="sortTable(4,4)" style="width:45%;">Sujet</th>
                                <th  onclick="sortTable(5,4)" style="width:45%;">Date de création</th>
                                <th><span class="glyphicon glyphicon-trash"></span></th>

                            </tr>

                            <tr id="antecedent"   *ngFor="let antecedent of antecedents"(click)="onSelect(antecedent)" (dblclick)="resetMessage();lgModal2.show()">


                                <td>{{ antecedent.idAnt }}</td>
                                <td>{{ antecedent.dateAnt }}</td>
                                <td>{{ antecedent.descriptionAnt }}</td>
                                <td>{{ antecedent.commentaireAnt }}</td>
                                <td>{{ antecedent.sujetAnt }}</td>
                                <td>{{antecedent.dateCreationAnt}}</td>
                                <td>  <button class="btn btn-primary" (click)="onSelect(antecedent);DeleteAntecedent()"><span class="glyphicon glyphicon-trash"></span></button></td>



                            </tr>

                        </table>
                    </div>
                </div>

            </div>

            <!--Large modal-->


            <div bsModal #lgModal2="bs-modal" class="modal fade" tabindex="-1" role="dialog"  [config]="{backdrop: 'static'} " aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title pull-left">Detail-Antecedent</h4>
                            <button type="button" class="close pull-right" (click)="lgModal2.hide()" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="detailAntecedent" *ngIf="antecedentSelectionne">

                                <div>
                                    <label>ID : {{antecedentSelectionne.idAnt}}</label>

                                </div>
                                <div>
                                    <label>Date :</label>
                                    <input [(ngModel)]="dateAnt" required />
                                </div>
                                <div>
                                    <label>Date :</label>
                                    <input [(ngModel)]="descriptionAnt" required />
                                </div>

                                <div>
                                    <label>Commentaire:</label>
                                    <input [(ngModel)]="commentaireAnt" required />
                                </div>
                                <div>
                                    <label>Sujet:</label>
                                    <input [(ngModel)]="sujetAnt" required />
                                </div>

                                <div>
                                    <label>Date de création: {{antecedentSelectionne.dateCreationAnt}}</label>

                                </div>




                            </div>


                            <div *ngIf="!deleted">
                                <button class="btn btn-primary" (click)="UpdateAntecedent()"><span class="glyphicon glyphicon-pencil"></span></button>
                                <button class="btn btn-primary" (click)="DeleteAntecedent()"><span class="glyphicon glyphicon-trash"></span></button>
                            </div>

                            <div *ngIf="messageKO">
                                <alert type="danger" [dismissOnTimeout]="2000">{{ messageKO }}</alert>
                            </div>

                            <div *ngIf="messageOK">
                                <alert type="success" [dismissOnTimeout]="2000">{{ messageOK }}</alert>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div bsModal #lgModal1="bs-modal" class="modal fade" tabindex="-1" role="dialog" [config]="{backdrop: 'static'}" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title pull-left">Ajouter un antecedent</h4>
                            <button type="button" class="close pull-right" (click)="lgModal1.hide();getAntecedents()" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="ajoutAntecedent">


                                <antecedent-creation *ngIf="dossierMedical" [dossierMedical]="dossierMedical"></antecedent-creation>


                            </div>

                        </div>
                    </div>
                </div>
            </div>




        </div>

    </div>
</div>


